import{c as O,o as Y,g as H,h as V,i as a,a as u,j as v,k as F,b as E,s as S,t as y,d as M,m as Z,F as I,n as ee,p as te,T as ne}from"./vendor.51d0a8a9.js";import{p as _}from"./index.790ab9ba.js";function re(e){const t=e.indexOf("_of_");if(t===-1)return{name:e,n:1};const c=parseInt(e.slice(t+4),10);return{name:e.slice(0,t-2),n:c}}async function le(e){const c=await(await fetch(`${_}${e}`)).text(),$=new DOMParser().parseFromString(c,"image/svg+xml"),f=new Map;return $.querySelectorAll("symbol").forEach(p=>{const{name:h,n:x}=re(p.getAttribute("id"));f.set(`${e}#${h}`,x)}),Array.from(f)}function se(e){const t=(e==null?void 0:e.api)?Array.isArray(e.api)?e.api:[e.api]:[globalThis.localStorage].filter(Boolean),c=(e==null?void 0:e.prefix)?`${e.prefix}.`:"",l=new Map,$=new Proxy({},{get(r,n){let s=l.get(n);s||(s=O(void 0,{equals:!1}),l.set(n,s)),s[0]();const o=t.reduce((i,N)=>i!==null||!N?i:N.getItem(`${c}${n}`),null);return o!==null&&(e==null?void 0:e.deserializer)?e.deserializer(o,n,e==null?void 0:e.options):o}}),f=(r,n,s)=>{const o=(e==null?void 0:e.serializer)?e.serializer(n,r,s??(e==null?void 0:e.options)):n;t.forEach(N=>N.setItem(`${c}${r}`,o));const i=l.get(r);i&&i[1]()},p=r=>t.forEach(n=>n.removeItem(r)),h=()=>t.forEach(r=>{var n;return(n=r==null?void 0:r.clear)==null?void 0:n.call(r)}),x=()=>{const r={},n=(s,o)=>{if(!r.hasOwnProperty(s)){const i=o&&(e==null?void 0:e.deserializer)?e.deserializer(o,s,e==null?void 0:e.options):o;i&&(r[s]=i)}};return t.forEach(s=>{if(typeof s.getAll=="function"){const o=s.getAll();for(const i of o)n(i,o[i])}else{let o=0,i;for(;i=s.key(o++);)r.hasOwnProperty(i)||n(i,s.getItem(i))}}),r};return Y(()=>{const r=n=>{var s;let o=!1;t.forEach(i=>{i!==n.storageArea&&n.key&&n.newValue!==i.getItem(n.key)&&(n.newValue?i.setItem(n.key,n.newValue):i.removeItem(n.key),o=!0)}),o&&n.key&&((s=l.get(n.key))==null||s[1]())};"addEventListener"in globalThis?(globalThis.addEventListener("storage",r),H(()=>globalThis.removeEventListener("storage",r))):(t.forEach(n=>{var s;return(s=n.addEventListener)==null?void 0:s.call(n,"storage",r)}),H(()=>t.forEach(n=>{var s;return(s=n.removeEventListener)==null?void 0:s.call(n,"storage",r)})))}),[$,f,{clear:h,remove:p,toJSON:x}]}const[ie,K,{clear:oe,remove:ce,toJSON:ae}]=se();function ue(){const e=ae(),t={};let c;for(c in e)c!=="_bodyType"&&(t[c]=JSON.parse(e[c]));return t}const[C,Q]=O(ue());function de(e,t){K(e,JSON.stringify(t));const c={...C()};c[e]=t,Q(c)}function z(e){ce(e);const t={...C()};delete t[e],Q(t)}function ge(e){return C()[e]!==void 0}function fe(){return ie._bodyType||0}function he(e){K("_bodyType",e)}const $e=y('<ul class="flex items-center"><li class="flex-1"><button class="p-2 text-white bg-indigo-600 rounded-full">\u2B05 Previous</button></li><li class="flex-1 text-right"><button class="p-2 text-white bg-indigo-600 rounded-full">Next \u27A1</button></li></ul>'),ve=y("<span>[remove]</span>"),T=y("<svg><use></use></svg>",4,!0),_e=y('<div><div><p>Name: </p><p>Layers: </p><p>Item: <!> (<!> of <!>)</p></div><svg viewBox="0 0 560 560" class="bg-white"><use></use></svg></div>'),me=y('<div class="border-solid border-4 border-teal-600"></div>');function be(e){const[t,c]=O(0),[l]=V(e.partsFileName,le);function $(){return l()[t()][1]>1?`${l()[t()][0]}_1_of_${l()[t()][1]}`:l()[t()][0]}function f(){return l()[t()][1]>1?`${l()[t()][0]}_2_of_${l()[t()][1]}`:""}function p(){return l()[t()][1]>2?`${l()[t()][0]}_3_of_${l()[t()][1]}`:""}function h(){return l()[t()][1]>3?`${l()[t()][0]}_4_of_${l()[t()][1]}`:""}function x(){return l()[t()][1]>4?`${l()[t()][0]}_5_of_${l()[t()][1]}`:""}function r(){return l()[t()][1]>5?`${l()[t()][0]}_6_of_${l()[t()][1]}`:""}function n(){l().length!==1&&(t()+1===l().length?c(0):c(t()+1))}function s(){l().length!==1&&(t()===0?c(l().length-1):c(t()-1))}function o(){const m=l()[t()][0].split("#");return{type:m[0].slice(14,-4),item:m[1]}}function i(m){de(m,[$(),f(),p(),h(),x(),r()].filter(Boolean))}function N(m){z(m)}return(()=>{const m=me.cloneNode(!0);return a(m,u(v,{get when(){return!l.loading},get children(){const k=_e.cloneNode(!0),j=k.firstChild,d=j.firstChild;d.firstChild;const b=d.nextSibling;b.firstChild;const w=b.nextSibling,L=w.firstChild,B=L.nextSibling,U=B.nextSibling,D=U.nextSibling,W=D.nextSibling,q=W.nextSibling;q.nextSibling;const P=j.nextSibling,A=P.firstChild;return a(k,u(v,{get when(){return l().length>1},get children(){const g=$e.cloneNode(!0),G=g.firstChild,X=G.nextSibling;return G.$$click=s,X.$$click=n,g}}),j),a(d,()=>o().type,null),a(d,u(v,{get when(){return ge(o().type)},get children(){const g=ve.cloneNode(!0);return F(g,"click",N.bind(null,o().type),!0),g}}),null),a(b,()=>l()[t()][1],null),a(w,()=>o().item,B),a(w,()=>t()+1,D),a(w,()=>l().length,q),F(P,"click",i.bind(null,o().type),!0),a(P,u(v,{get when(){return r()},get children(){const g=T.cloneNode(!0);return E(()=>S(g,"href",`${_}${r()}`)),g}}),A),a(P,u(v,{get when(){return x()},get children(){const g=T.cloneNode(!0);return E(()=>S(g,"href",`${_}${x()}`)),g}}),A),a(P,u(v,{get when(){return h()},get children(){const g=T.cloneNode(!0);return E(()=>S(g,"href",`${_}${h()}`)),g}}),A),a(P,u(v,{get when(){return p()},get children(){const g=T.cloneNode(!0);return E(()=>S(g,"href",`${_}${p()}`)),g}}),A),a(P,u(v,{get when(){return f()},get children(){const g=T.cloneNode(!0);return E(()=>S(g,"href",`${_}${f()}`)),g}}),A),E(()=>S(A,"href",`${_}${$()}`)),k}})),m})()}M(["click"]);const we=y("<b>Start adding parts to the character.</b>"),ye=y('<button class="p-3 bg-red-600 text-white-300">RESET</button>'),pe=y('<svg viewBox="0 0 560 560" class="bg-white"><use></use><use></use><use></use><use></use></svg>'),xe=y('<div><ul class="flex items-center"></ul><p></p></div>'),Ne=y('<div class="border-solid border-4 border-teal-600"></div>'),Se=y('<li class="flex-1"><button class="p-2 text-white bg-red-600 rounded-full"></button></li>'),J=y("<svg><use></use></svg>",4,!0),R=te(()=>Object.keys(C()).length);function ke(e){const t=e.split("_");return t.length===2&&(t[1]==="left"||t[1]==="right")?{name:void 0,more:e}:{name:t.slice(-1)[0],more:t.slice(0,-1).join("_")}}async function Ee(e){const c=await(await fetch(`${_}${e}`)).text(),$=new DOMParser().parseFromString(c,"image/svg+xml"),f=new Map;return $.querySelectorAll("symbol").forEach(p=>{const{name:h,more:x}=ke(p.getAttribute("id")),r=f.get(h);r?(r.push(x),f.set(h,r)):f.set(h,[x])}),Array.from(f)}function Ce(e){const[t,c]=O(fe()),[l]=V(e.partsFileName,Ee);Z(()=>{he(t())});function $(){const[r,n]=l()[t()];return n.map(s=>`${s}_${r}`)}function f(r,n){return`${r}_${n.slice(20+r.length)}`}function p(r,n){const s=f(r,n);return e.layers().bodyBack.find(o=>o===s)!==void 0}function h(r,n){const s=f(r,n);return e.layers().bodyFront.find(o=>o===s)!==void 0}function x(){console.log("CLEAR"),oe(),c(0),window.location.href=window.location.href+"?cleared"}return(()=>{const r=Ne.cloneNode(!0);return a(r,u(v,{get when(){return!l.loading&&!e.layers.loading},get children(){const n=xe.cloneNode(!0),s=n.firstChild,o=s.nextSibling;return a(s,u(I,{get each(){return l()},children:(i,N)=>u(v,{get when(){return i[0]},get children(){const m=Se.cloneNode(!0),k=m.firstChild;return F(k,"click",c.bind(null,N()),!0),a(k,()=>i[0]),m}})})),a(o,u(v,{get when(){return!R()},get children(){return we.cloneNode(!0)}}),null),a(o,u(v,{get when(){return R()},get children(){return["Number of parts: ",ee(()=>R()),"."," ",(()=>{const i=ye.cloneNode(!0);return i.$$click=x,i})()]}}),null),a(n,u(v,{get when(){return $().length>0},fallback:"Pick a body type",get children(){const i=pe.cloneNode(!0),N=i.firstChild,m=N.nextSibling,k=m.nextSibling,j=k.nextSibling;return a(i,u(I,{get each(){return Object.keys(C())},children:d=>u(I,{get each(){return C()[d]},children:b=>u(v,{get when(){return p(d,b)},get children(){const w=J.cloneNode(!0);return F(w,"click",z.bind(null,d),!0),S(w,"href",`${_}${b}`),w}})})}),N),a(i,u(I,{get each(){return $().reverse()},children:d=>(()=>{const b=J.cloneNode(!0);return E(()=>S(b,"href",`${_}${e.partsFileName}#${d}`)),b})()}),N),a(i,u(I,{get each(){return Object.keys(C())},children:d=>u(I,{get each(){return C()[d]},children:b=>u(v,{get when(){return h(d,b)},get children(){const w=J.cloneNode(!0);return F(w,"click",z.bind(null,d),!0),S(w,"href",`${_}${b}`),w}})})}),null),E(d=>{const b=`${_}${e.partsFileName}#ifoot_left`,w=`${_}${e.partsFileName}#ifoot_right`,L=`${_}${e.partsFileName}#ihand_left`,B=`${_}${e.partsFileName}#ihand_right`;return b!==d._v$&&S(N,"href",d._v$=b),w!==d._v$2&&S(m,"href",d._v$2=w),L!==d._v$3&&S(k,"href",d._v$3=L),B!==d._v$4&&S(j,"href",d._v$4=B),d},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),i}}),null),n}})),r})()}M(["click"]);function Pe(e){return u(Ce,{get layers(){return e.layers},partsFileName:"sprites/whole-body.svg"})}const Ie=y('<section class="bg-pink-100 text-gray-700 p-8"><h1 class="text-2xl font-bold">Credits</h1><details><summary>PRE </summary><pre></pre></details><div class="grid gap-4 grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4"></div></section>'),Ae=y("<div>Loading...</div>"),Fe=y("<div><button></button></div>"),je=["sprites/whole-armband.svg","sprites/whole-belt.svg","sprites/whole-button.svg","sprites/whole-cloak.svg","sprites/whole-coat.svg","sprites/whole-gloves.svg","sprites/whole-holster.svg","sprites/whole-jacket.svg","sprites/whole-kneepads.svg","sprites/whole-necklace.svg","sprites/whole-pants.svg","sprites/whole-pet.svg","sprites/whole-scarf.svg","sprites/whole-scar.svg","sprites/whole-shirt.svg","sprites/whole-shoes.svg","sprites/whole-shoulderpads.svg","sprites/whole-socks.svg","sprites/whole-suit.svg","sprites/whole-tatoo.svg","sprites/whole-tie.svg","sprites/whole-underwear.svg","sprites/whole-vest.svg","sprites/whole-watch.svg","sprites/whole-wings.svg"];function Be(e){return e.slice(14,-4)}async function Oe(e){return await(await fetch(e)).json()}function Ve(){const[e,t]=O(0),[c]=V(`${_}sprites/male-body_front_swaying.json`,Oe),l="v.3c0c07995c9313e9975648aa48c4d1ff68164c0b";return(()=>{const $=Ie.cloneNode(!0),f=$.firstChild,p=f.nextSibling,h=p.firstChild;h.firstChild;const x=h.nextSibling,r=p.nextSibling;return a($,u(ne,{get children(){return["Credits page (",l,")"]}}),f),a(h,()=>c.loading?"loading...":"ready",null),a(x,()=>JSON.stringify(c(),null,2)),a($,u(Pe,{layers:c}),r),a(r,u(I,{each:je,get fallback(){return Ae.cloneNode(!0)},children:(n,s)=>(()=>{const o=Fe.cloneNode(!0),i=o.firstChild;return F(i,"click",t.bind(null,s()),!0),a(i,()=>Be(n)),a(o,u(v,{get when(){return s()===e()},get children(){return u(be,{layers:c,partsFileName:n})}}),null),o})()})),$})()}M(["click"]);export{Ve as default};
