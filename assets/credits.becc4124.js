import{c as j,o as U,g as q,h as L,j as W,i as a,a as d,k as b,m as A,b as S,s as x,t as p,d as T,F,T as X}from"./vendor.011a001a.js";function Y(e){const t=e.indexOf("_of_");if(t===-1)return{name:e,n:1};const c=parseInt(e.slice(t+4),10);return{name:e.slice(0,t-2),n:c}}async function Z(e){const c=await(await fetch(e)).text(),y=new DOMParser().parseFromString(c,"image/svg+xml"),h=new Map;return y.querySelectorAll("symbol").forEach(v=>{const{name:_,n:u}=Y(v.getAttribute("id"));h.set(`${e}#${_}`,u)}),Array.from(h)}function ee(e){const t=(e==null?void 0:e.api)?Array.isArray(e.api)?e.api:[e.api]:[globalThis.localStorage].filter(Boolean),c=(e==null?void 0:e.prefix)?`${e.prefix}.`:"",r=new Map,y=new Proxy({},{get(l,n){let s=r.get(n);s||(s=j(void 0,{equals:!1}),r.set(n,s)),s[0]();const i=t.reduce((o,N)=>o!==null||!N?o:N.getItem(`${c}${n}`),null);return i!==null&&(e==null?void 0:e.deserializer)?e.deserializer(i,n,e==null?void 0:e.options):i}}),h=(l,n,s)=>{const i=(e==null?void 0:e.serializer)?e.serializer(n,l,s??(e==null?void 0:e.options)):n;t.forEach(N=>N.setItem(`${c}${l}`,i));const o=r.get(l);o&&o[1]()},v=l=>t.forEach(n=>n.removeItem(l)),_=()=>t.forEach(l=>{var n;return(n=l==null?void 0:l.clear)==null?void 0:n.call(l)}),u=()=>{const l={},n=(s,i)=>{if(!l.hasOwnProperty(s)){const o=i&&(e==null?void 0:e.deserializer)?e.deserializer(i,s,e==null?void 0:e.options):i;o&&(l[s]=o)}};return t.forEach(s=>{if(typeof s.getAll=="function"){const i=s.getAll();for(const o of i)n(o,i[o])}else{let i=0,o;for(;o=s.key(i++);)l.hasOwnProperty(o)||n(o,s.getItem(o))}}),l};return U(()=>{const l=n=>{var s;let i=!1;t.forEach(o=>{o!==n.storageArea&&n.key&&n.newValue!==o.getItem(n.key)&&(n.newValue?o.setItem(n.key,n.newValue):o.removeItem(n.key),i=!0)}),i&&n.key&&((s=r.get(n.key))==null||s[1]())};"addEventListener"in globalThis?(globalThis.addEventListener("storage",l),q(()=>globalThis.removeEventListener("storage",l))):(t.forEach(n=>{var s;return(s=n.addEventListener)==null?void 0:s.call(n,"storage",l)}),q(()=>t.forEach(n=>{var s;return(s=n.removeEventListener)==null?void 0:s.call(n,"storage",l)})))}),[y,h,{clear:_,remove:v,toJSON:u}]}const[,te,{remove:ne,toJSON:re}]=ee();function le(){const e=re(),t={};let c;for(c in e)t[c]=JSON.parse(e[c]);return t}const[k,G]=j(le());function se(e,t){te(e,JSON.stringify(t));const c={...k()};c[e]=t,G(c)}function V(e){ne(e);const t={...k()};delete t[e],G(t)}function ie(e){return k()[e]!==void 0}const oe=p('<ul class="flex items-center"><li class="flex-1"><button class="p-2 text-white bg-indigo-600 rounded-full">\u2B05 Previous</button></li><li class="flex-1 text-right"><button class="p-2 text-white bg-indigo-600 rounded-full">Next \u27A1</button></li></ul>'),ce=p("<span>[remove]</span>"),O=p("<svg><use></use></svg>",4,!0),ae=p('<div><div><p>Name: </p><p>Layers: </p><p>Item: <!> (<!> of <!>)</p></div><svg viewBox="0 0 560 560" class="bg-white"><use></use></svg></div>'),ue=p('<div class="border-solid border-4 border-teal-600"></div>');function de(e){const[t,c]=j(0),[r]=L(e.partsFileName,Z);W(()=>console.log("v... layers",e.layers.loading?"Loading..":"Ready",e.layers()));function y(){return r()[t()][1]>1?`${r()[t()][0]}_1_of_${r()[t()][1]}`:r()[t()][0]}function h(){return r()[t()][1]>1?`${r()[t()][0]}_2_of_${r()[t()][1]}`:""}function v(){return r()[t()][1]>2?`${r()[t()][0]}_3_of_${r()[t()][1]}`:""}function _(){return r()[t()][1]>3?`${r()[t()][0]}_4_of_${r()[t()][1]}`:""}function u(){return r()[t()][1]>4?`${r()[t()][0]}_5_of_${r()[t()][1]}`:""}function l(){return r()[t()][1]>5?`${r()[t()][0]}_6_of_${r()[t()][1]}`:""}function n(){r().length!==1&&(t()+1===r().length?c(0):c(t()+1))}function s(){r().length!==1&&(t()===0?c(r().length-1):c(t()-1))}function i(){const m=r()[t()][0].split("#");return{type:m[0].slice(15,-4),item:m[1]}}function o(m){se(m,[y(),h(),v(),_(),u(),l()].filter(Boolean))}function N(m){V(m)}return(()=>{const m=ue.cloneNode(!0);return a(m,d(b,{get when(){return!r.loading},get children(){const P=ae.cloneNode(!0),g=P.firstChild,$=g.firstChild;$.firstChild;const w=$.nextSibling;w.firstChild;const C=w.nextSibling,B=C.firstChild,M=B.nextSibling,H=M.nextSibling,J=H.nextSibling,K=J.nextSibling,D=K.nextSibling;D.nextSibling;const E=g.nextSibling,I=E.firstChild;return a(P,d(b,{get when(){return r().length>1},get children(){const f=oe.cloneNode(!0),R=f.firstChild,Q=R.nextSibling;return R.$$click=s,Q.$$click=n,f}}),g),a($,()=>i().type,null),a($,d(b,{get when(){return ie(i().type)},get children(){const f=ce.cloneNode(!0);return A(f,"click",N.bind(null,i().type),!0),f}}),null),a(w,()=>r()[t()][1],null),a(C,()=>i().item,M),a(C,()=>t()+1,J),a(C,()=>r().length,D),A(E,"click",o.bind(null,i().type),!0),a(E,d(b,{get when(){return l()},get children(){const f=O.cloneNode(!0);return S(()=>x(f,"href",l())),f}}),I),a(E,d(b,{get when(){return u()},get children(){const f=O.cloneNode(!0);return S(()=>x(f,"href",u())),f}}),I),a(E,d(b,{get when(){return _()},get children(){const f=O.cloneNode(!0);return S(()=>x(f,"href",_())),f}}),I),a(E,d(b,{get when(){return v()},get children(){const f=O.cloneNode(!0);return S(()=>x(f,"href",v())),f}}),I),a(E,d(b,{get when(){return h()},get children(){const f=O.cloneNode(!0);return S(()=>x(f,"href",h())),f}}),I),S(()=>x(I,"href",y())),P}})),m})()}T(["click"]);const ge=p('<svg viewBox="0 0 560 560" class="bg-white"><use></use><use></use><use></use><use></use></svg>'),fe=p('<div><ul class="flex items-center"></ul><p>Number of parts: </p></div>'),he=p('<div class="border-solid border-4 border-teal-600"></div>'),$e=p('<li class="flex-1"><button class="p-2 text-white bg-red-600 rounded-full"></button></li>'),z=p("<svg><use></use></svg>",4,!0);function ve(e){const t=e.split("_");return t.length===2&&(t[1]==="left"||t[1]==="right")?{name:void 0,more:e}:{name:t.slice(-1)[0],more:t.slice(0,-1).join("_")}}async function _e(e){const c=await(await fetch(e)).text(),y=new DOMParser().parseFromString(c,"image/svg+xml"),h=new Map;return y.querySelectorAll("symbol").forEach(v=>{const{name:_,more:u}=ve(v.getAttribute("id")),l=h.get(_);l?(l.push(u),h.set(_,l)):h.set(_,[u])}),Array.from(h)}function me(e){const[t,c]=j([]),[r]=L(e.partsFileName,_e);function y(u){const[l,n]=r()[u],s=n.map(i=>`${i}_${l}`);c(s)}function h(u,l){return`${u}_${l.slice(21+u.length)}`}function v(u,l){const n=h(u,l);return e.layers().bodyBack.find(s=>s===n)!==void 0}function _(u,l){const n=h(u,l);return e.layers().bodyFront.find(s=>s===n)!==void 0}return(()=>{const u=he.cloneNode(!0);return a(u,d(b,{get when(){return!r.loading&&!e.layers.loading},get children(){const l=fe.cloneNode(!0),n=l.firstChild,s=n.nextSibling;return s.firstChild,a(n,d(F,{get each(){return r()},children:(i,o)=>d(b,{get when(){return i[0]},get children(){const N=$e.cloneNode(!0),m=N.firstChild;return A(m,"click",y.bind(null,o()),!0),a(m,()=>i[0]),N}})})),a(s,()=>Object.keys(k()).length,null),a(l,d(b,{get when(){return t().length>0},fallback:"Pick a body type",get children(){const i=ge.cloneNode(!0),o=i.firstChild,N=o.nextSibling,m=N.nextSibling,P=m.nextSibling;return a(i,d(F,{get each(){return Object.keys(k())},children:g=>d(F,{get each(){return k()[g]},children:$=>d(b,{get when(){return v(g,$)},get children(){const w=z.cloneNode(!0);return A(w,"click",V.bind(null,g),!0),x(w,"href",$),w}})})}),o),a(i,d(F,{get each(){return t().reverse()},children:g=>(()=>{const $=z.cloneNode(!0);return S(()=>x($,"href",`${e.partsFileName}#${g}`)),$})()}),o),a(i,d(F,{get each(){return Object.keys(k())},children:g=>d(F,{get each(){return k()[g]},children:$=>d(b,{get when(){return _(g,$)},get children(){const w=z.cloneNode(!0);return A(w,"click",V.bind(null,g),!0),x(w,"href",$),w}})})}),null),S(g=>{const $=`${e.partsFileName}#ifoot_left`,w=`${e.partsFileName}#ifoot_right`,C=`${e.partsFileName}#ihand_left`,B=`${e.partsFileName}#ihand_right`;return $!==g._v$&&x(o,"href",g._v$=$),w!==g._v$2&&x(N,"href",g._v$2=w),C!==g._v$3&&x(m,"href",g._v$3=C),B!==g._v$4&&x(P,"href",g._v$4=B),g},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),i}}),null),l}})),u})()}T(["click"]);function we(e){return d(me,{get layers(){return e.layers},partsFileName:"/sprites/whole-body.svg"})}const be=p('<section class="bg-pink-100 text-gray-700 p-8"><h1 class="text-2xl font-bold">Credits</h1><details><summary>PRE </summary><pre></pre></details><div class="grid gap-4 grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4"></div></section>'),ye=p("<div>Loading...</div>"),xe=p("<div><button></button></div>"),pe=["/sprites/whole-armband.svg","/sprites/whole-belt.svg","/sprites/whole-button.svg","/sprites/whole-cloak.svg","/sprites/whole-coat.svg","/sprites/whole-gloves.svg","/sprites/whole-holster.svg","/sprites/whole-jacket.svg","/sprites/whole-kneepads.svg","/sprites/whole-necklace.svg","/sprites/whole-pants.svg","/sprites/whole-pet.svg","/sprites/whole-scarf.svg","/sprites/whole-scar.svg","/sprites/whole-shirt.svg","/sprites/whole-shoes.svg","/sprites/whole-shoulderpads.svg","/sprites/whole-socks.svg","/sprites/whole-suit.svg","/sprites/whole-tatoo.svg","/sprites/whole-tie.svg","/sprites/whole-underwear.svg","/sprites/whole-vest.svg","/sprites/whole-watch.svg","/sprites/whole-wings.svg"];function Ne(e){return e.slice(15,-4)}async function Se(e){return await(await fetch(e)).json()}function Ce(){const[e,t]=j(0),[c]=L("/sprites/male-body_front_swaying.json",Se);return(()=>{const r=be.cloneNode(!0),y=r.firstChild,h=y.nextSibling,v=h.firstChild;v.firstChild;const _=v.nextSibling,u=h.nextSibling;return a(r,d(X,{children:"Credits page"}),y),a(v,()=>c.loading?"loading...":"ready",null),a(_,()=>JSON.stringify(c(),null,2)),a(r,d(we,{layers:c}),u),a(u,d(F,{each:pe,get fallback(){return ye.cloneNode(!0)},children:(l,n)=>(()=>{const s=xe.cloneNode(!0),i=s.firstChild;return A(i,"click",t.bind(null,n()),!0),a(i,()=>Ne(l)),a(s,d(b,{get when(){return n()===e()},get children(){return d(de,{layers:c,partsFileName:l})}}),null),s})()})),r})()}T(["click"]);export{Ce as default};
