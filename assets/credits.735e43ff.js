import{c as O,o as W,g as Y,h as T,i as a,a as d,j as p,k as j,b as k,s as x,t as N,d as M,F as A,T as X}from"./vendor.abca1887.js";import{p as $}from"./index.6392e8e1.js";function Z(e){const t=e.indexOf("_of_");if(console.log("YA",t,e),t===-1)return{name:e,n:1};const c=parseInt(e.slice(t+4),10),n=e.slice(0,t-2);return console.log("isLayered",c,n),{name:n,n:c}}async function ee(e){console.log("FNparseit",e,`${$}${e}`);const c=await(await fetch(`${$}${e}`)).text(),m=new DOMParser().parseFromString(c,"image/svg+xml"),h=new Map;return m.querySelectorAll("symbol").forEach(_=>{const{name:b,n:u}=Z(_.getAttribute("id"));h.set(`${e}#${b}`,u)}),Array.from(h)}function te(e){const t=(e==null?void 0:e.api)?Array.isArray(e.api)?e.api:[e.api]:[globalThis.localStorage].filter(Boolean),c=(e==null?void 0:e.prefix)?`${e.prefix}.`:"",n=new Map,m=new Proxy({},{get(l,r){let s=n.get(r);s||(s=O(void 0,{equals:!1}),n.set(r,s)),s[0]();const o=t.reduce((i,S)=>i!==null||!S?i:S.getItem(`${c}${r}`),null);return o!==null&&(e==null?void 0:e.deserializer)?e.deserializer(o,r,e==null?void 0:e.options):o}}),h=(l,r,s)=>{const o=(e==null?void 0:e.serializer)?e.serializer(r,l,s??(e==null?void 0:e.options)):r;t.forEach(S=>S.setItem(`${c}${l}`,o));const i=n.get(l);i&&i[1]()},_=l=>t.forEach(r=>r.removeItem(l)),b=()=>t.forEach(l=>{var r;return(r=l==null?void 0:l.clear)==null?void 0:r.call(l)}),u=()=>{const l={},r=(s,o)=>{if(!l.hasOwnProperty(s)){const i=o&&(e==null?void 0:e.deserializer)?e.deserializer(o,s,e==null?void 0:e.options):o;i&&(l[s]=i)}};return t.forEach(s=>{if(typeof s.getAll=="function"){const o=s.getAll();for(const i of o)r(i,o[i])}else{let o=0,i;for(;i=s.key(o++);)l.hasOwnProperty(i)||r(i,s.getItem(i))}}),l};return W(()=>{const l=r=>{var s;let o=!1;t.forEach(i=>{i!==r.storageArea&&r.key&&r.newValue!==i.getItem(r.key)&&(r.newValue?i.setItem(r.key,r.newValue):i.removeItem(r.key),o=!0)}),o&&r.key&&((s=n.get(r.key))==null||s[1]())};"addEventListener"in globalThis?(globalThis.addEventListener("storage",l),Y(()=>globalThis.removeEventListener("storage",l))):(t.forEach(r=>{var s;return(s=r.addEventListener)==null?void 0:s.call(r,"storage",l)}),Y(()=>t.forEach(r=>{var s;return(s=r.removeEventListener)==null?void 0:s.call(r,"storage",l)})))}),[m,h,{clear:b,remove:_,toJSON:u}]}const[ne,G,{clear:Fe,remove:re,toJSON:le}]=te();function se(){const e=le(),t={};let c;for(c in e)t[c]=JSON.parse(e[c]);return console.log("J2",t),t}const[E,H]=O(se());function oe(e,t){G(e,JSON.stringify(t));const c={...E()};c[e]=t,H(c)}function V(e){re(e);const t={...E()};delete t[e],H(t)}function ie(e){return E()[e]!==void 0}function ce(){return ne._bodyType||0}function ue(e){G("_bodyType",e)}const ae=N('<ul class="flex items-center"><li class="flex-1"><button class="p-2 text-white bg-indigo-600 rounded-full">\u2B05 Previous</button></li><li class="flex-1 text-right"><button class="p-2 text-white bg-indigo-600 rounded-full">Next \u27A1</button></li></ul>'),de=N("<span>[remove]</span>"),B=N("<svg><use></use></svg>",4,!0),ge=N('<div><div><p>Name: </p><p>Layers: </p><p>Item: <!> (<!> of <!>)</p></div><svg viewBox="0 0 560 560" class="bg-white"><use></use></svg></div>'),fe=N('<div class="border-solid border-4 border-teal-600"></div>');function he(e){const[t,c]=O(0),[n]=T(e.partsFileName,ee);function m(){return n()[t()][1]>1?`${n()[t()][0]}_1_of_${n()[t()][1]}`:n()[t()][0]}function h(){return n()[t()][1]>1?`${n()[t()][0]}_2_of_${n()[t()][1]}`:""}function _(){return n()[t()][1]>2?`${n()[t()][0]}_3_of_${n()[t()][1]}`:""}function b(){return n()[t()][1]>3?`${n()[t()][0]}_4_of_${n()[t()][1]}`:""}function u(){return n()[t()][1]>4?`${n()[t()][0]}_5_of_${n()[t()][1]}`:""}function l(){return n()[t()][1]>5?`${n()[t()][0]}_6_of_${n()[t()][1]}`:""}function r(){n().length!==1&&(t()+1===n().length?c(0):c(t()+1))}function s(){n().length!==1&&(t()===0?c(n().length-1):c(t()-1))}function o(){const w=n()[t()][0].split("#");return{type:w[0].slice(14,-4),item:w[1]}}function i(w){oe(w,[m(),h(),_(),b(),u(),l()].filter(Boolean))}function S(w){V(w)}return(()=>{const w=fe.cloneNode(!0);return a(w,d(p,{get when(){return!n.loading},get children(){const P=ge.cloneNode(!0),g=P.firstChild,v=g.firstChild;v.firstChild;const y=v.nextSibling;y.firstChild;const C=y.nextSibling,L=C.firstChild,J=L.nextSibling,K=J.nextSibling,R=K.nextSibling,Q=R.nextSibling,D=Q.nextSibling;D.nextSibling;const I=g.nextSibling,F=I.firstChild;return a(P,d(p,{get when(){return n().length>1},get children(){const f=ae.cloneNode(!0),q=f.firstChild,U=q.nextSibling;return q.$$click=s,U.$$click=r,f}}),g),a(v,()=>o().type,null),a(v,d(p,{get when(){return ie(o().type)},get children(){const f=de.cloneNode(!0);return j(f,"click",S.bind(null,o().type),!0),f}}),null),a(y,()=>n()[t()][1],null),a(C,()=>o().item,J),a(C,()=>t()+1,R),a(C,()=>n().length,D),j(I,"click",i.bind(null,o().type),!0),a(I,d(p,{get when(){return l()},get children(){const f=B.cloneNode(!0);return k(()=>x(f,"href",`${$}${l()}`)),f}}),F),a(I,d(p,{get when(){return u()},get children(){const f=B.cloneNode(!0);return k(()=>x(f,"href",`${$}${u()}`)),f}}),F),a(I,d(p,{get when(){return b()},get children(){const f=B.cloneNode(!0);return k(()=>x(f,"href",`${$}${b()}`)),f}}),F),a(I,d(p,{get when(){return _()},get children(){const f=B.cloneNode(!0);return k(()=>x(f,"href",`${$}${_()}`)),f}}),F),a(I,d(p,{get when(){return h()},get children(){const f=B.cloneNode(!0);return k(()=>x(f,"href",`${$}${h()}`)),f}}),F),k(()=>x(F,"href",`${$}${m()}`)),P}})),w})()}M(["click"]);const $e=N('<svg viewBox="0 0 560 560" class="bg-white"><use></use><use></use><use></use><use></use></svg>'),ve=N('<div><ul class="flex items-center"></ul><p>Number of parts: </p></div>'),_e=N('<div class="border-solid border-4 border-teal-600"></div>'),be=N('<li class="flex-1"><button class="p-2 text-white bg-red-600 rounded-full"></button></li>'),z=N("<svg><use></use></svg>",4,!0);function we(e){const t=e.split("_");return t.length===2&&(t[1]==="left"||t[1]==="right")?{name:void 0,more:e}:{name:t.slice(-1)[0],more:t.slice(0,-1).join("_")}}async function me(e){const c=await(await fetch(`${$}${e}`)).text(),m=new DOMParser().parseFromString(c,"image/svg+xml"),h=new Map;return m.querySelectorAll("symbol").forEach(_=>{const{name:b,more:u}=we(_.getAttribute("id")),l=h.get(b);l?(l.push(u),h.set(b,l)):h.set(b,[u])}),Array.from(h)}function ye(e){const[t,c]=O(ce()),[n]=T(e.partsFileName,me);function m(){ue(t());const[u,l]=n()[t()];return l.map(r=>`${r}_${u}`)}function h(u,l){return console.log("theItem",`${u}_${l.slice(20+u.length)}`),`${u}_${l.slice(20+u.length)}`}function _(u,l){const r=h(u,l);return e.layers().bodyBack.find(s=>s===r)!==void 0}function b(u,l){const r=h(u,l);return console.log("OVER",u,l,e.layers().bodyFront.find(s=>s===r)!==void 0),e.layers().bodyFront.find(s=>s===r)!==void 0}return(()=>{const u=_e.cloneNode(!0);return a(u,d(p,{get when(){return!n.loading&&!e.layers.loading},get children(){const l=ve.cloneNode(!0),r=l.firstChild,s=r.nextSibling;return s.firstChild,a(r,d(A,{get each(){return n()},children:(o,i)=>d(p,{get when(){return o[0]},get children(){const S=be.cloneNode(!0),w=S.firstChild;return j(w,"click",c.bind(null,i()),!0),a(w,()=>o[0]),S}})})),a(s,()=>Object.keys(E()).length-1,null),a(l,d(p,{get when(){return m().length>0},fallback:"Pick a body type",get children(){const o=$e.cloneNode(!0),i=o.firstChild,S=i.nextSibling,w=S.nextSibling,P=w.nextSibling;return a(o,d(A,{get each(){return Object.keys(E())},children:g=>d(A,{get each(){return E()[g]},children:v=>d(p,{get when(){return _(g,v)},get children(){const y=z.cloneNode(!0);return j(y,"click",V.bind(null,g),!0),x(y,"href",`${$}${v}`),y}})})}),i),a(o,d(A,{get each(){return m().reverse()},children:g=>(()=>{const v=z.cloneNode(!0);return k(()=>x(v,"href",`${$}${e.partsFileName}#${g}`)),v})()}),i),a(o,d(A,{get each(){return Object.keys(E())},children:g=>d(A,{get each(){return E()[g]},children:v=>d(p,{get when(){return b(g,v)},get children(){const y=z.cloneNode(!0);return j(y,"click",V.bind(null,g),!0),x(y,"href",`${$}${v}`),y}})})}),null),k(g=>{const v=`${$}${e.partsFileName}#ifoot_left`,y=`${$}${e.partsFileName}#ifoot_right`,C=`${$}${e.partsFileName}#ihand_left`,L=`${$}${e.partsFileName}#ihand_right`;return v!==g._v$&&x(i,"href",g._v$=v),y!==g._v$2&&x(S,"href",g._v$2=y),C!==g._v$3&&x(w,"href",g._v$3=C),L!==g._v$4&&x(P,"href",g._v$4=L),g},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),o}}),null),l}})),u})()}M(["click"]);function pe(e){return d(ye,{get layers(){return e.layers},partsFileName:"sprites/whole-body.svg"})}const xe=N('<section class="bg-pink-100 text-gray-700 p-8"><h1 class="text-2xl font-bold">Credits</h1><details><summary>PRE </summary><pre></pre></details><div class="grid gap-4 grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4"></div></section>'),Ne=N("<div>Loading...</div>"),Se=N("<div><button></button></div>"),ke=["sprites/whole-armband.svg","sprites/whole-belt.svg","sprites/whole-button.svg","sprites/whole-cloak.svg","sprites/whole-coat.svg","sprites/whole-gloves.svg","sprites/whole-holster.svg","sprites/whole-jacket.svg","sprites/whole-kneepads.svg","sprites/whole-necklace.svg","sprites/whole-pants.svg","sprites/whole-pet.svg","sprites/whole-scarf.svg","sprites/whole-scar.svg","sprites/whole-shirt.svg","sprites/whole-shoes.svg","sprites/whole-shoulderpads.svg","sprites/whole-socks.svg","sprites/whole-suit.svg","sprites/whole-tatoo.svg","sprites/whole-tie.svg","sprites/whole-underwear.svg","sprites/whole-vest.svg","sprites/whole-watch.svg","sprites/whole-wings.svg"];function Ee(e){return console.log("ITEMNAME",e),e.slice(14,-4)}async function Ce(e){return await(await fetch(e)).json()}function je(){const[e,t]=O(0);console.log("LAYERS path",`${$}sprites/male-body_front_swaying.json`);const[c]=T(`${$}sprites/male-body_front_swaying.json`,Ce);return(()=>{const n=xe.cloneNode(!0),m=n.firstChild,h=m.nextSibling,_=h.firstChild;_.firstChild;const b=_.nextSibling,u=h.nextSibling;return a(n,d(X,{children:"Credits page"}),m),a(_,()=>c.loading?"loading...":"ready",null),a(b,()=>JSON.stringify(c(),null,2)),a(n,d(pe,{layers:c}),u),a(u,d(A,{each:ke,get fallback(){return Ne.cloneNode(!0)},children:(l,r)=>(()=>{const s=Se.cloneNode(!0),o=s.firstChild;return j(o,"click",t.bind(null,r()),!0),a(o,()=>Ee(l)),a(s,d(p,{get when(){return r()===e()},get children(){return d(he,{layers:c,partsFileName:l})}}),null),s})()})),n})()}M(["click"]);export{je as default};
