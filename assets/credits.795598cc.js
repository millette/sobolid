import{c as j,o as W,g as U,h as L,j as X,i as u,a as d,k as x,m as F,b as E,s as p,t as N,d as R,F as A,T as Z}from"./vendor.bae5e718.js";import{p as _}from"./index.6c607a9e.js";function ee(e){const t=e.indexOf("_of_");if(t===-1)return{name:e,n:1};const c=parseInt(e.slice(t+4),10);return{name:e.slice(0,t-2),n:c}}async function te(e){const c=await(await fetch(`${_}/${e}`)).text(),w=new DOMParser().parseFromString(c,"image/svg+xml"),h=new Map;return w.querySelectorAll("symbol").forEach(m=>{const{name:b,n:a}=ee(m.getAttribute("id"));h.set(`${e}#${b}`,a)}),Array.from(h)}function ne(e){const t=(e==null?void 0:e.api)?Array.isArray(e.api)?e.api:[e.api]:[globalThis.localStorage].filter(Boolean),c=(e==null?void 0:e.prefix)?`${e.prefix}.`:"",r=new Map,w=new Proxy({},{get(l,n){let s=r.get(n);s||(s=j(void 0,{equals:!1}),r.set(n,s)),s[0]();const o=t.reduce((i,S)=>i!==null||!S?i:S.getItem(`${c}${n}`),null);return o!==null&&(e==null?void 0:e.deserializer)?e.deserializer(o,n,e==null?void 0:e.options):o}}),h=(l,n,s)=>{const o=(e==null?void 0:e.serializer)?e.serializer(n,l,s??(e==null?void 0:e.options)):n;t.forEach(S=>S.setItem(`${c}${l}`,o));const i=r.get(l);i&&i[1]()},m=l=>t.forEach(n=>n.removeItem(l)),b=()=>t.forEach(l=>{var n;return(n=l==null?void 0:l.clear)==null?void 0:n.call(l)}),a=()=>{const l={},n=(s,o)=>{if(!l.hasOwnProperty(s)){const i=o&&(e==null?void 0:e.deserializer)?e.deserializer(o,s,e==null?void 0:e.options):o;i&&(l[s]=i)}};return t.forEach(s=>{if(typeof s.getAll=="function"){const o=s.getAll();for(const i of o)n(i,o[i])}else{let o=0,i;for(;i=s.key(o++);)l.hasOwnProperty(i)||n(i,s.getItem(i))}}),l};return W(()=>{const l=n=>{var s;let o=!1;t.forEach(i=>{i!==n.storageArea&&n.key&&n.newValue!==i.getItem(n.key)&&(n.newValue?i.setItem(n.key,n.newValue):i.removeItem(n.key),o=!0)}),o&&n.key&&((s=r.get(n.key))==null||s[1]())};"addEventListener"in globalThis?(globalThis.addEventListener("storage",l),U(()=>globalThis.removeEventListener("storage",l))):(t.forEach(n=>{var s;return(s=n.addEventListener)==null?void 0:s.call(n,"storage",l)}),U(()=>t.forEach(n=>{var s;return(s=n.removeEventListener)==null?void 0:s.call(n,"storage",l)})))}),[w,h,{clear:b,remove:m,toJSON:a}]}const[re,Y,{clear:le,remove:se,toJSON:oe}]=ne();le();console.log("CLEAR");function ie(){const e=oe(),t={};let c;for(c in e)t[c]=JSON.parse(e[c]);return t}const[O,G]=j(ie());function ce(e,t){Y(e,JSON.stringify(t));const c={...O()};c[e]=t,G(c)}function V(e){se(e);const t={...O()};delete t[e],G(t)}function ue(e){return O()[e]!==void 0}function ae(){return re._bodyType||0}function de(e){Y("_bodyType",e)}const ge=N('<ul class="flex items-center"><li class="flex-1"><button class="p-2 text-white bg-indigo-600 rounded-full">\u2B05 Previous</button></li><li class="flex-1 text-right"><button class="p-2 text-white bg-indigo-600 rounded-full">Next \u27A1</button></li></ul>'),fe=N("<span>[remove]</span>"),T=N("<svg><use></use></svg>",4,!0),he=N('<div><div><p>Name: </p><p>Layers: </p><p>Item: <!> (<!> of <!>)</p></div><svg viewBox="0 0 560 560" class="bg-white"><use></use></svg></div>'),$e=N('<div class="border-solid border-4 border-teal-600"></div>');function ve(e){const[t,c]=j(0),[r]=L(e.partsFileName,te);X(()=>console.log("v... layers",e.layers.loading?"Loading..":"Ready",e.layers()));function w(){return console.log("S1"),r()[t()][1]>1?`${r()[t()][0]}_1_of_${r()[t()][1]}`:(console.log("S1 NO LAYERS"),r()[t()][0])}function h(){return console.log("S2"),r()[t()][1]>1?`${r()[t()][0]}_2_of_${r()[t()][1]}`:(console.log("NOT S2"),"")}function m(){return console.log("S3"),r()[t()][1]>2?`${r()[t()][0]}_3_of_${r()[t()][1]}`:(console.log("NOT S3"),"")}function b(){return console.log("S4"),r()[t()][1]>3?`${r()[t()][0]}_4_of_${r()[t()][1]}`:(console.log("NOT S4"),"")}function a(){return console.log("S5"),r()[t()][1]>4?`${r()[t()][0]}_5_of_${r()[t()][1]}`:(console.log("NOT S5"),"")}function l(){return console.log("S6"),r()[t()][1]>5?`${r()[t()][0]}_6_of_${r()[t()][1]}`:(console.log("NOT S6"),"")}function n(){r().length!==1&&(t()+1===r().length?c(0):c(t()+1))}function s(){r().length!==1&&(t()===0?c(r().length-1):c(t()-1))}function o(){const $=r()[t()][0].split("#");return{type:$[0].slice(15,-4),item:$[1]}}function i($){const k=[w(),h(),m(),b(),a(),l()].filter(Boolean);console.log("punch",$,k),ce($,k)}function S($){console.log("REMOVE",$),V($)}return(()=>{const $=$e.cloneNode(!0);return u($,d(x,{get when(){return!r.loading},get children(){const k=he.cloneNode(!0),g=k.firstChild,v=g.firstChild;v.firstChild;const y=v.nextSibling;y.firstChild;const C=y.nextSibling,B=C.firstChild,z=B.nextSibling,H=z.nextSibling,D=H.nextSibling,K=D.nextSibling,J=K.nextSibling;J.nextSibling;const I=g.nextSibling,P=I.firstChild;return u(k,d(x,{get when(){return r().length>1},get children(){const f=ge.cloneNode(!0),q=f.firstChild,Q=q.nextSibling;return q.$$click=s,Q.$$click=n,f}}),g),u(v,()=>o().type,null),u(v,d(x,{get when(){return ue(o().type)},get children(){const f=fe.cloneNode(!0);return F(f,"click",S.bind(null,o().type),!0),f}}),null),u(y,()=>r()[t()][1],null),u(C,()=>o().item,z),u(C,()=>t()+1,D),u(C,()=>r().length,J),F(I,"click",i.bind(null,o().type),!0),u(I,d(x,{get when(){return l()},get children(){const f=T.cloneNode(!0);return E(()=>p(f,"href",`${_}${l()}`)),f}}),P),u(I,d(x,{get when(){return a()},get children(){const f=T.cloneNode(!0);return E(()=>p(f,"href",`${_}${a()}`)),f}}),P),u(I,d(x,{get when(){return b()},get children(){const f=T.cloneNode(!0);return E(()=>p(f,"href",`${_}${b()}`)),f}}),P),u(I,d(x,{get when(){return m()},get children(){const f=T.cloneNode(!0);return E(()=>p(f,"href",`${_}${m()}`)),f}}),P),u(I,d(x,{get when(){return h()},get children(){const f=T.cloneNode(!0);return E(()=>p(f,"href",`${_}${h()}`)),f}}),P),E(()=>p(P,"href",`${_}${w()}`)),k}})),$})()}R(["click"]);const _e=N('<svg viewBox="0 0 560 560" class="bg-white"><use></use><use></use><use></use><use></use></svg>'),me=N('<div><ul class="flex items-center"></ul><p>Number of parts: </p></div>'),be=N('<div class="border-solid border-4 border-teal-600"></div>'),we=N('<li class="flex-1"><button class="p-2 text-white bg-red-600 rounded-full"></button></li>'),M=N("<svg><use></use></svg>",4,!0);function ye(e){const t=e.split("_");return t.length===2&&(t[1]==="left"||t[1]==="right")?{name:void 0,more:e}:{name:t.slice(-1)[0],more:t.slice(0,-1).join("_")}}async function xe(e){const c=await(await fetch(`${_}/${e}`)).text(),w=new DOMParser().parseFromString(c,"image/svg+xml"),h=new Map;return w.querySelectorAll("symbol").forEach(m=>{const{name:b,more:a}=ye(m.getAttribute("id")),l=h.get(b);l?(l.push(a),h.set(b,l)):h.set(b,[a])}),Array.from(h)}function pe(e){const[t,c]=j(ae()),[r]=L(e.partsFileName,xe);function w(){de(t());const[a,l]=r()[t()];return l.map(n=>`${n}_${a}`)}function h(a,l){return`${a}_${l.slice(21+a.length)}`}function m(a,l){console.log("UNDER",a,l);const n=h(a,l);return console.log("UNDER-x",n),e.layers().bodyBack.find(s=>s===n)!==void 0}function b(a,l){console.log("OVER",a,l);const n=h(a,l);return console.log("OVER-x",n),e.layers().bodyFront.find(s=>s===n)!==void 0}return(()=>{const a=be.cloneNode(!0);return u(a,d(x,{get when(){return!r.loading&&!e.layers.loading},get children(){const l=me.cloneNode(!0),n=l.firstChild,s=n.nextSibling;return s.firstChild,u(n,d(A,{get each(){return r()},children:(o,i)=>d(x,{get when(){return o[0]},get children(){const S=we.cloneNode(!0),$=S.firstChild;return F($,"click",c.bind(null,i()),!0),u($,()=>o[0]),S}})})),u(s,()=>Object.keys(O()).length,null),u(l,d(x,{get when(){return w().length>0},fallback:"Pick a body type",get children(){const o=_e.cloneNode(!0),i=o.firstChild,S=i.nextSibling,$=S.nextSibling,k=$.nextSibling;return u(o,d(A,{get each(){return Object.keys(O())},children:g=>d(A,{get each(){return O()[g]},children:v=>d(x,{get when(){return m(g,v)},get children(){const y=M.cloneNode(!0);return F(y,"click",V.bind(null,g),!0),p(y,"href",`${_}${v}`),y}})})}),i),u(o,d(A,{get each(){return w().reverse()},children:g=>(()=>{const v=M.cloneNode(!0);return E(()=>p(v,"href",`${_}${e.partsFileName}#${g}`)),v})()}),i),u(o,d(A,{get each(){return Object.keys(O())},children:g=>d(A,{get each(){return O()[g]},children:v=>d(x,{get when(){return b(g,v)},get children(){const y=M.cloneNode(!0);return F(y,"click",V.bind(null,g),!0),p(y,"href",`${_}${v}`),y}})})}),null),E(g=>{const v=`${_}${e.partsFileName}#ifoot_left`,y=`${_}${e.partsFileName}#ifoot_right`,C=`${_}${e.partsFileName}#ihand_left`,B=`${_}${e.partsFileName}#ihand_right`;return v!==g._v$&&p(i,"href",g._v$=v),y!==g._v$2&&p(S,"href",g._v$2=y),C!==g._v$3&&p($,"href",g._v$3=C),B!==g._v$4&&p(k,"href",g._v$4=B),g},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),o}}),null),l}})),a})()}R(["click"]);function Ne(e){return d(pe,{get layers(){return e.layers},partsFileName:"/sprites/whole-body.svg"})}const Se=N('<section class="bg-pink-100 text-gray-700 p-8"><h1 class="text-2xl font-bold">Credits</h1><details><summary>PRE </summary><pre></pre></details><div class="grid gap-4 grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4"></div></section>'),ke=N("<div>Loading...</div>"),Ee=N("<div><button></button></div>"),Oe=["/sprites/whole-armband.svg","/sprites/whole-belt.svg","/sprites/whole-button.svg","/sprites/whole-cloak.svg","/sprites/whole-coat.svg","/sprites/whole-gloves.svg","/sprites/whole-holster.svg","/sprites/whole-jacket.svg","/sprites/whole-kneepads.svg","/sprites/whole-necklace.svg","/sprites/whole-pants.svg","/sprites/whole-pet.svg","/sprites/whole-scarf.svg","/sprites/whole-scar.svg","/sprites/whole-shirt.svg","/sprites/whole-shoes.svg","/sprites/whole-shoulderpads.svg","/sprites/whole-socks.svg","/sprites/whole-suit.svg","/sprites/whole-tatoo.svg","/sprites/whole-tie.svg","/sprites/whole-underwear.svg","/sprites/whole-vest.svg","/sprites/whole-watch.svg","/sprites/whole-wings.svg"];function Ce(e){return e.slice(15,-4)}async function Ie(e){return await(await fetch(e)).json()}function Fe(){const[e,t]=j(0),[c]=L(`${_}/sprites/male-body_front_swaying.json`,Ie);return(()=>{const r=Se.cloneNode(!0),w=r.firstChild,h=w.nextSibling,m=h.firstChild;m.firstChild;const b=m.nextSibling,a=h.nextSibling;return u(r,d(Z,{children:"Credits page"}),w),u(m,()=>c.loading?"loading...":"ready",null),u(b,()=>JSON.stringify(c(),null,2)),u(r,d(Ne,{layers:c}),a),u(a,d(A,{each:Oe,get fallback(){return ke.cloneNode(!0)},children:(l,n)=>(()=>{const s=Ee.cloneNode(!0),o=s.firstChild;return F(o,"click",t.bind(null,n()),!0),u(o,()=>Ce(l)),u(s,d(x,{get when(){return n()===e()},get children(){return d(ve,{layers:c,partsFileName:l})}}),null),s})()})),r})()}R(["click"]);export{Fe as default};
