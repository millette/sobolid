import{c as B,o as X,g as G,h as T,i as u,a as d,j as p,k as j,b as k,s as x,t as N,d as V,F,T as Y}from"./vendor.2e9c5a21.js";import{p as v}from"./index.66fb4129.js";function Z(e){const t=e.indexOf("_of_");if(t===-1)return{name:e,n:1};const c=parseInt(e.slice(t+4),10);return{name:e.slice(0,t-2),n:c}}async function ee(e){const c=await(await fetch(`${v}${e}`)).text(),w=new DOMParser().parseFromString(c,"image/svg+xml"),h=new Map;return w.querySelectorAll("symbol").forEach(_=>{const{name:m,n:a}=Z(_.getAttribute("id"));h.set(`${e}#${m}`,a)}),Array.from(h)}function te(e){const t=(e==null?void 0:e.api)?Array.isArray(e.api)?e.api:[e.api]:[globalThis.localStorage].filter(Boolean),c=(e==null?void 0:e.prefix)?`${e.prefix}.`:"",r=new Map,w=new Proxy({},{get(l,n){let s=r.get(n);s||(s=B(void 0,{equals:!1}),r.set(n,s)),s[0]();const i=t.reduce((o,S)=>o!==null||!S?o:S.getItem(`${c}${n}`),null);return i!==null&&(e==null?void 0:e.deserializer)?e.deserializer(i,n,e==null?void 0:e.options):i}}),h=(l,n,s)=>{const i=(e==null?void 0:e.serializer)?e.serializer(n,l,s??(e==null?void 0:e.options)):n;t.forEach(S=>S.setItem(`${c}${l}`,i));const o=r.get(l);o&&o[1]()},_=l=>t.forEach(n=>n.removeItem(l)),m=()=>t.forEach(l=>{var n;return(n=l==null?void 0:l.clear)==null?void 0:n.call(l)}),a=()=>{const l={},n=(s,i)=>{if(!l.hasOwnProperty(s)){const o=i&&(e==null?void 0:e.deserializer)?e.deserializer(i,s,e==null?void 0:e.options):i;o&&(l[s]=o)}};return t.forEach(s=>{if(typeof s.getAll=="function"){const i=s.getAll();for(const o of i)n(o,i[o])}else{let i=0,o;for(;o=s.key(i++);)l.hasOwnProperty(o)||n(o,s.getItem(o))}}),l};return X(()=>{const l=n=>{var s;let i=!1;t.forEach(o=>{o!==n.storageArea&&n.key&&n.newValue!==o.getItem(n.key)&&(n.newValue?o.setItem(n.key,n.newValue):o.removeItem(n.key),i=!0)}),i&&n.key&&((s=r.get(n.key))==null||s[1]())};"addEventListener"in globalThis?(globalThis.addEventListener("storage",l),G(()=>globalThis.removeEventListener("storage",l))):(t.forEach(n=>{var s;return(s=n.addEventListener)==null?void 0:s.call(n,"storage",l)}),G(()=>t.forEach(n=>{var s;return(s=n.removeEventListener)==null?void 0:s.call(n,"storage",l)})))}),[w,h,{clear:m,remove:_,toJSON:a}]}const[ne,H,{remove:re,toJSON:le}]=te();function se(){const e=le(),t={};let c;for(c in e)t[c]=JSON.parse(e[c]);return t}const[C,K]=B(se());function ie(e,t){H(e,JSON.stringify(t));const c={...C()};c[e]=t,K(c)}function z(e){re(e);const t={...C()};delete t[e],K(t)}function oe(e){return C()[e]!==void 0}function ce(){return ne._bodyType||0}function ue(e){H("_bodyType",e)}const ae=N('<ul class="flex items-center"><li class="flex-1"><button class="p-2 text-white bg-indigo-600 rounded-full">\u2B05 Previous</button></li><li class="flex-1 text-right"><button class="p-2 text-white bg-indigo-600 rounded-full">Next \u27A1</button></li></ul>'),de=N("<span>[remove]</span>"),O=N("<svg><use></use></svg>",4,!0),ge=N('<div><div><p>Name: </p><p>Layers: </p><p>Item: <!> (<!> of <!>)</p></div><svg viewBox="0 0 560 560" class="bg-white"><use></use></svg></div>'),fe=N('<div class="border-solid border-4 border-teal-600"></div>');function he(e){const[t,c]=B(0),[r]=T(e.partsFileName,ee);function w(){return r()[t()][1]>1?`${r()[t()][0]}_1_of_${r()[t()][1]}`:r()[t()][0]}function h(){return r()[t()][1]>1?`${r()[t()][0]}_2_of_${r()[t()][1]}`:""}function _(){return r()[t()][1]>2?`${r()[t()][0]}_3_of_${r()[t()][1]}`:""}function m(){return r()[t()][1]>3?`${r()[t()][0]}_4_of_${r()[t()][1]}`:""}function a(){return r()[t()][1]>4?`${r()[t()][0]}_5_of_${r()[t()][1]}`:""}function l(){return r()[t()][1]>5?`${r()[t()][0]}_6_of_${r()[t()][1]}`:""}function n(){r().length!==1&&(t()+1===r().length?c(0):c(t()+1))}function s(){r().length!==1&&(t()===0?c(r().length-1):c(t()-1))}function i(){const b=r()[t()][0].split("#");return{type:b[0].slice(14,-4),item:b[1]}}function o(b){ie(b,[w(),h(),_(),m(),a(),l()].filter(Boolean))}function S(b){z(b)}return(()=>{const b=fe.cloneNode(!0);return u(b,d(p,{get when(){return!r.loading},get children(){const A=ge.cloneNode(!0),g=A.firstChild,$=g.firstChild;$.firstChild;const y=$.nextSibling;y.firstChild;const E=y.nextSibling,L=E.firstChild,J=L.nextSibling,Q=J.nextSibling,D=Q.nextSibling,U=D.nextSibling,q=U.nextSibling;q.nextSibling;const I=g.nextSibling,P=I.firstChild;return u(A,d(p,{get when(){return r().length>1},get children(){const f=ae.cloneNode(!0),R=f.firstChild,W=R.nextSibling;return R.$$click=s,W.$$click=n,f}}),g),u($,()=>i().type,null),u($,d(p,{get when(){return oe(i().type)},get children(){const f=de.cloneNode(!0);return j(f,"click",S.bind(null,i().type),!0),f}}),null),u(y,()=>r()[t()][1],null),u(E,()=>i().item,J),u(E,()=>t()+1,D),u(E,()=>r().length,q),j(I,"click",o.bind(null,i().type),!0),u(I,d(p,{get when(){return l()},get children(){const f=O.cloneNode(!0);return k(()=>x(f,"href",`${v}${l()}`)),f}}),P),u(I,d(p,{get when(){return a()},get children(){const f=O.cloneNode(!0);return k(()=>x(f,"href",`${v}${a()}`)),f}}),P),u(I,d(p,{get when(){return m()},get children(){const f=O.cloneNode(!0);return k(()=>x(f,"href",`${v}${m()}`)),f}}),P),u(I,d(p,{get when(){return _()},get children(){const f=O.cloneNode(!0);return k(()=>x(f,"href",`${v}${_()}`)),f}}),P),u(I,d(p,{get when(){return h()},get children(){const f=O.cloneNode(!0);return k(()=>x(f,"href",`${v}${h()}`)),f}}),P),k(()=>x(P,"href",`${v}${w()}`)),A}})),b})()}V(["click"]);const $e=N('<svg viewBox="0 0 560 560" class="bg-white"><use></use><use></use><use></use><use></use></svg>'),ve=N('<div><ul class="flex items-center"></ul><p>Number of parts: </p></div>'),_e=N('<div class="border-solid border-4 border-teal-600"></div>'),me=N('<li class="flex-1"><button class="p-2 text-white bg-red-600 rounded-full"></button></li>'),M=N("<svg><use></use></svg>",4,!0);function be(e){const t=e.split("_");return t.length===2&&(t[1]==="left"||t[1]==="right")?{name:void 0,more:e}:{name:t.slice(-1)[0],more:t.slice(0,-1).join("_")}}async function we(e){const c=await(await fetch(`${v}${e}`)).text(),w=new DOMParser().parseFromString(c,"image/svg+xml"),h=new Map;return w.querySelectorAll("symbol").forEach(_=>{const{name:m,more:a}=be(_.getAttribute("id")),l=h.get(m);l?(l.push(a),h.set(m,l)):h.set(m,[a])}),Array.from(h)}function ye(e){const[t,c]=B(ce()),[r]=T(e.partsFileName,we);function w(){ue(t());const[a,l]=r()[t()];return l.map(n=>`${n}_${a}`)}function h(a,l){return`${a}_${l.slice(20+a.length)}`}function _(a,l){const n=h(a,l);return e.layers().bodyBack.find(s=>s===n)!==void 0}function m(a,l){const n=h(a,l);return e.layers().bodyFront.find(s=>s===n)!==void 0}return(()=>{const a=_e.cloneNode(!0);return u(a,d(p,{get when(){return!r.loading&&!e.layers.loading},get children(){const l=ve.cloneNode(!0),n=l.firstChild,s=n.nextSibling;return s.firstChild,u(n,d(F,{get each(){return r()},children:(i,o)=>d(p,{get when(){return i[0]},get children(){const S=me.cloneNode(!0),b=S.firstChild;return j(b,"click",c.bind(null,o()),!0),u(b,()=>i[0]),S}})})),u(s,()=>Object.keys(C()).length-1,null),u(l,d(p,{get when(){return w().length>0},fallback:"Pick a body type",get children(){const i=$e.cloneNode(!0),o=i.firstChild,S=o.nextSibling,b=S.nextSibling,A=b.nextSibling;return u(i,d(F,{get each(){return Object.keys(C())},children:g=>d(F,{get each(){return C()[g]},children:$=>d(p,{get when(){return _(g,$)},get children(){const y=M.cloneNode(!0);return j(y,"click",z.bind(null,g),!0),x(y,"href",`${v}${$}`),y}})})}),o),u(i,d(F,{get each(){return w().reverse()},children:g=>(()=>{const $=M.cloneNode(!0);return k(()=>x($,"href",`${v}${e.partsFileName}#${g}`)),$})()}),o),u(i,d(F,{get each(){return Object.keys(C())},children:g=>d(F,{get each(){return C()[g]},children:$=>d(p,{get when(){return m(g,$)},get children(){const y=M.cloneNode(!0);return j(y,"click",z.bind(null,g),!0),x(y,"href",`${v}${$}`),y}})})}),null),k(g=>{const $=`${v}${e.partsFileName}#ifoot_left`,y=`${v}${e.partsFileName}#ifoot_right`,E=`${v}${e.partsFileName}#ihand_left`,L=`${v}${e.partsFileName}#ihand_right`;return $!==g._v$&&x(o,"href",g._v$=$),y!==g._v$2&&x(S,"href",g._v$2=y),E!==g._v$3&&x(b,"href",g._v$3=E),L!==g._v$4&&x(A,"href",g._v$4=L),g},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),i}}),null),l}})),a})()}V(["click"]);function pe(e){return d(ye,{get layers(){return e.layers},partsFileName:"sprites/whole-body.svg"})}const xe=N('<section class="bg-pink-100 text-gray-700 p-8"><h1 class="text-2xl font-bold">Credits</h1><details><summary>PRE </summary><pre></pre></details><div class="grid gap-4 grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4"></div></section>'),Ne=N("<div>Loading...</div>"),Se=N("<div><button></button></div>"),ke=["sprites/whole-armband.svg","sprites/whole-belt.svg","sprites/whole-button.svg","sprites/whole-cloak.svg","sprites/whole-coat.svg","sprites/whole-gloves.svg","sprites/whole-holster.svg","sprites/whole-jacket.svg","sprites/whole-kneepads.svg","sprites/whole-necklace.svg","sprites/whole-pants.svg","sprites/whole-pet.svg","sprites/whole-scarf.svg","sprites/whole-scar.svg","sprites/whole-shirt.svg","sprites/whole-shoes.svg","sprites/whole-shoulderpads.svg","sprites/whole-socks.svg","sprites/whole-suit.svg","sprites/whole-tatoo.svg","sprites/whole-tie.svg","sprites/whole-underwear.svg","sprites/whole-vest.svg","sprites/whole-watch.svg","sprites/whole-wings.svg"];function Ce(e){return e.slice(14,-4)}async function Ee(e){return await(await fetch(e)).json()}function Pe(){const[e,t]=B(0),[c]=T(`${v}sprites/male-body_front_swaying.json`,Ee);return(()=>{const r=xe.cloneNode(!0),w=r.firstChild,h=w.nextSibling,_=h.firstChild;_.firstChild;const m=_.nextSibling,a=h.nextSibling;return u(r,d(Y,{children:"Credits page"}),w),u(_,()=>c.loading?"loading...":"ready",null),u(m,()=>JSON.stringify(c(),null,2)),u(r,d(pe,{layers:c}),a),u(a,d(F,{each:ke,get fallback(){return Ne.cloneNode(!0)},children:(l,n)=>(()=>{const s=Se.cloneNode(!0),i=s.firstChild;return j(i,"click",t.bind(null,n()),!0),u(i,()=>Ce(l)),u(s,d(p,{get when(){return n()===e()},get children(){return d(he,{layers:c,partsFileName:l})}}),null),s})()})),r})()}V(["click"]);export{Pe as default};
